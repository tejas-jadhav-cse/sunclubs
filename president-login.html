<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8">
  <link rel="icon" href="images/mu-fav-ico.png" type="image/x-icon">
  <link rel="alternate" href="https://mastersunion.org/president-login" hreflang="en-in">
  <link rel="canonical" href="https://mastersunion.org/president-login">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="facebook-domain-verification" content="s4ua1njpjtxm5nvujtikb092tdhwbq">
  <title>Club President Login | Sandip University</title>
  <meta property="og:type" content="website">
  <meta name="description" content="Club President Login Portal at Sandip University">
  <meta property="og:title" content="Club President Login | Sandip University">
  <meta property="og:image" content="images/MastersUnion_Logo_Facebook.png">
  <meta property="og:description" content="Club President Login Portal at Sandip University">
  <meta property="og:url" content="https://mastersunion.org/president-login">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@themastersunion">
  <meta name="twitter:creator" content="@themastersunion">
  <meta name="twitter:image" content="https://cdn.mastersunion.link/MastersUnion_Logo_Twitter.png">
  <meta name="twitter:title" content="Club President Login | Sandip University">
  <meta name="twitter:description" content="Club President Login Portal at Sandip University">
   
   <link rel="stylesheet" href="css/master-production.css">
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/swiper-bundle.min.css">
  <link rel="stylesheet" href="css/category-buttons.css">
  <link rel="stylesheet" href="css/president.css">
  <script src="js/jquery.min.js"></script>
  <script src="js/swiper-bundle.min.js"></script>
  <script src="js/filestack.min.js"></script>
  
  <!-- Supabase JS Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- CLOUDFLARE INTEGRATION START - Add Cloudflare scripts here for security and performance optimization -->
  <!-- CLOUDFLARE INTEGRATION END -->

  <script type="text/javascript">
    (function (c, l, a, r, i, t, y) {
      c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
      t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
      y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
    })(window, document, "clarity", "script", "fqg7rs7i1v");
  </script>

  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-MJMS5KQ');</script>
  <!-- End Google Tag Manager -->

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MJMS5KQ" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- Styles moved to css/president.css -->

</head>

<body>
  <div id="preloader">
    <div class="preloader">
      <img loading="lazy" src="images/preloader.gif" alt="Loader">
    </div>
  </div>

  <script>
    // Enhanced preloader handling with orientation support
    document.addEventListener("DOMContentLoaded", function() {
      // Hide preloader immediately to prevent scrollbars
      $("#preloader").fadeOut(100);
      
      // Handle orientation changes on mobile devices
      window.addEventListener('orientationchange', function() {
        // Small timeout to allow browser to adjust
        setTimeout(function() {
          const vh = window.innerHeight * 0.01;
          document.documentElement.style.setProperty('--vh', `${vh}px`);
        }, 300);
      });
      
      // Set initial viewport height for mobile browsers
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    });
  </script>
  <script src="js/slick.min.js"></script>

  <main class="president-main">
      <!-- Login section starts directly without marquee header -->

      <!-- Login Section -->
      <section class="caseUnion president-section">
        <div class="container president-container">
          <div class="login-container">
            <!-- CLOUDFLARE TURNSTILE INTEGRATION - Add Cloudflare Turnstile here for CAPTCHA protection -->
            <!-- Background image div removed -->
            <div class="login-form">
              <div class="logo-container">
                <img src="images/applicationLogo.svg" alt="Sandip University Logo" class="login-logo">
              </div>
              <div class="login-title">
                <h2 class="font-white go-HighlightHeading">Club President<br>
                  <span class="fr-HeadingItalic">Login Portal</span>
                </h2>
              </div>
              
              <form id="presidentLoginForm">
                <div class="form-group">
                  <select class="form-control" id="email" required>
                    <option value="" disabled selected>Select Club</option>
                    <option value="sun-event-club">SUN Event Club</option>
                    <option value="sun-dance-club">SUN Dance Club</option>
                    <option value="sun-photography-club">SUN Photography Club</option>
                    <option value="sun-media-club">SUN Media Club</option>
                    <option value="sun-literary-drama-club">SUN Literary & Drama Club</option>
                    <option value="sun-music-club">SUN Music Club</option>
                    <option value="sun-painting-art-club">SUN Painting & Art Club</option>
                    <option value="sun-creativity-craft-club">SUN Creativity & Craft Club</option>
                    <option value="sun-trekking-club">SUN Trekking Club</option>
                    <option value="sun-helping-hands-club">SUN Helping Hands Club</option>
                    <option value="sun-women-empowerment-club">SUN Women Empowerment Club</option>
                    <option value="sun-mathematics-club">SUN Mathematics Club</option>
                    <option value="sun-leads-community-club">SUN Leads Community Club</option>
                    <option value="sun-open-source-sect-club">SUN Open Source (SECT) Club</option>
                    <option value="sun-cyber-security-club">SUN Cyber Security Club</option>
                    <option value="sun-astronomy-club">SUN Astronomy Club</option>
                    <option value="sun-talk-club">SUN Talk Club</option>
                    <option value="sun-esports-club">SUN Esports Club</option>
                    <option value="sun-act-club">SUN Action for Collective Transformation Club</option>
                    <option value="sun-aero-modelling-club">SUN Aero Modelling Club</option>
                    <option value="sun-apps-bloggers-club">SUN Apps and Bloggers Club</option>
                    <option value="sun-culinary-club">SUN Culinary Club</option>
                    <option value="sun-cycling-club">SUN Cycling Club</option>
                    <option value="sun-ecological-club">SUN Ecological Club</option>
                    <option value="sun-energy-club">SUN Energy Club</option>
                    <option value="sun-fitness-club">SUN Fitness Club</option>
                    <option value="sun-aiml-robotics-club">SUN AIML & Robotics Club</option>
                    <option value="sun-movie-club">SUN Movie Club</option>
                    <option value="sun-quiz-debate-club">SUN Quiz & Debate Club</option>
                    <option value="sun-science-club">SUN Science Club</option>
                    <option value="sun-youth-empowerment-club">SUN Youth Empowerment Club</option>
                    <option value="sun-webmaster-club">SUN WebMaster Club</option>
                    <option value="sun-innovator-club">SUN Innovator Club</option>
                  </select>
                </div>
                <div class="form-group">
                  <input type="password" class="form-control" id="password" placeholder="Password" required>
                </div>
                
                <!-- CLOUDFLARE TURNSTILE WIDGET - This is where the Cloudflare Turnstile widget would be placed -->
                
                <div class="form-group">
                  <button type="submit" class="submit-btn">Login</button>
                </div>
                
                <div class="forgot-password">
                  <a href="#">Forgot Password?</a>
                </div>
                
                <div class="login-footer">
                  <p>Having trouble logging in? Contact <a href="mailto:sun.club@sandipuniversity.edu.in">sun.club@sandipuniversity.edu.in</a></p>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>
    </main>
    
    <!-- CLOUDFLARE ANALYTICS INTEGRATION - Add Cloudflare Web Analytics here for privacy-focused analytics -->
    
    <!-- Main JS Files -->
    <script defer="" async="" src="js/main.js"></script>
    <script defer="" async="" src="js/sliders.js"></script>
    
    <!-- Supabase Configuration and Authentication -->
    <script>
      // Initialize the Supabase client
      const SUPABASE_URL = 'https://wlvyzynxpawwzpjeicxp.supabase.co'; // Replace with your actual Supabase URL
      const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indsdnl6eW54cGF3d3pwamVpY3hwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyMTU1MDAsImV4cCI6MjA2Nzc5MTUwMH0.Pklrv6OADXUt566nkUQnfJZizabWVtidQgTPvgR4V_s'; // Replace with your actual Supabase anon key
      const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
      
      // Form submission handling with Supabase authentication
      document.getElementById('presidentLoginForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Show loading state
        const submitBtn = document.querySelector('.submit-btn');
        const originalBtnText = submitBtn.innerText;
        submitBtn.innerText = 'Logging in...';
        submitBtn.disabled = true;
        
        const clubId = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        try {
          // Method 1: Using Supabase Auth (recommended for production)
          const { data, error } = await supabase.auth.signInWithPassword({
            email: `${clubId}@example.com`, // You may need to adjust this based on your auth setup
            password: password
          });
          
          if (error) throw error;
          
          // Get additional club information from the database
          const { data: clubData, error: clubError } = await supabase
            .from('clubs')
            .select('*')
            .eq('club_id', clubId)
            .single();
          
          if (clubError) throw clubError;
          
          console.log('Login successful:', data);
          console.log('Club data:', clubData);
          
          // Store session data
          localStorage.setItem('clubId', clubId);
          localStorage.setItem('clubName', clubData.name);
          localStorage.setItem('clubRole', clubData.role || 'president');
          
          // Redirect to dashboard
          window.location.href = 'dashboard.html';
          
        } catch (error) {
          console.error('Error during login:', error.message);
          
          // Show error message to user
          alert(`Login failed: ${error.message}`);
          
          // Reset button state
          submitBtn.innerText = originalBtnText;
          submitBtn.disabled = false;
        }
      });
      
      // Check if user is already logged in
      document.addEventListener('DOMContentLoaded', async function() {
        try {
          const { data: { session }, error } = await supabase.auth.getSession();
          
          if (session) {
            console.log('User is already logged in');
            window.location.href = 'dashboard.html';
          }
        } catch (error) {
          console.error('Session check error:', error.message);
        }
      });
      
      // Handle forgot password
      document.querySelector('.forgot-password a').addEventListener('click', async function(e) {
        e.preventDefault();
        
        const clubId = document.getElementById('email').value;
        
        if (!clubId || clubId === '') {
          alert('Please select your club first');
          return;
        }
        
        try {
          // Get the email associated with the club
          const { data, error } = await supabase
            .from('clubs')
            .select('email')
            .eq('club_id', clubId)
            .single();
            
          if (error) throw error;
          
          if (!data || !data.email) {
            throw new Error('No email found for this club');
          }
          
          // Send password reset email
          const { error: resetError } = await supabase.auth.resetPasswordForEmail(data.email, {
            redirectTo: 'https://sandipuniversity.org/president-reset-password',
          });
          
          if (resetError) throw resetError;
          
          alert('Password reset instructions have been sent to your email');
          
        } catch (error) {
          console.error('Error sending reset instructions:', error.message);
          alert(`Error: ${error.message}`);
        }
      });
    </script>
</body>
</html>